<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript">
function toGoogle()
{
let param = document.getElementById("searchKey").value
window.open("https://www.google.com/search?q=" + param, "_blank")
}

function toBing()
{
let param = document.getElementById("searchKey").value
window.open("https://cn.bing.com/search?q=" + param, "_blank")
}

function toBaidu()
{
let param = document.getElementById("searchKey").value
window.open("https://www.baidu.com/s?wd=" + param, "_blank")
}

function loadOftenUse() {
let request = new XMLHttpRequest();
request.open("get", "oftenuse.json");
request.responseType = "text";
request.send();
request.onload = function() {
let table = document.getElementById("oftenTable");
let data = request.response;
let root = JSON.parse(data);
let sites = root["sites"];
let row;
for (let i = 0; i < sites.length; ++i) {
if (i % 6 == 0) {
row = table.insertRow(i / 6);
}
let cell = row.insertCell(i % 6);
let site = sites[i];
let a = document.createElement("a");
cell.appendChild(a);
a.style.fontSize = 24;
a.href = site.url;
a.text = site.title;
a.target = "_blank";
}
};
}

function loadFavorite() {
let request = new XMLHttpRequest();
request.open("get", "favorite.json");
request.responseType = "text";
request.send();
request.onload = function() {
let table = document.getElementById("favoriteTable");
let data = request.response;
let root = JSON.parse(data);
let categories = root["categories"];
let row;
for (let i = 0; i < categories.length; ++i) {
let category = categories[i];
if (i % 4 == 0) {
row = table.insertRow(i / 4);
}
let cell = row.insertCell(i % 4);
let sel = document.createElement("select");
cell.appendChild(sel);
sel.addEventListener("change", function() {
window.open(sel.value, "_blank");
sel.selectedIndex = 0;
});
let head = document.createElement("option");
sel.appendChild(head);
head.text = category.name;
head.disabled = true;
head.selected = true;
let sites = category.sites;
for (let i = 0; i < sites.length; ++i) {
let site = sites[i];
let op = document.createElement("option");
sel.appendChild(op);
op.value = site.url;
op.text = site.title;
}
}
};
}

function onLoad() {
loadOftenUse();
loadFavorite();
}
</script>

<link rel="stylesheet" href="navi.css">
</head>

<body onload="onLoad()">

<!-- ermao-weather -->
<script type="text/javascript">
WIDGET = {FID: 'lYJ94FouCD'}
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>

<div class="default-div">
<input id="searchKey" class="search-input" type="text" placeholder="Search Something" onkeyup="if (event.keyCode == 13) { toGoogle() }">
<button class="common-button" onclick="toGoogle()">谷歌</button>
<button class="common-button" onclick="toBing()">必应</button>
<button class="common-button" onclick="toBaidu()">百度</button>
</div>

<div class="default-div">
<h2 class="default-h2">常用网址</h2>
<table id="oftenTable" class="default-table">

</table>
<hr class="default-hr"/>
</div>

<div class="default-div">
<h2 class="default-h2">收藏夹</h2>
<table id="favoriteTable" class="default-table">
</table>
<hr class="default-hr"/>
</div>
</body>

</html>